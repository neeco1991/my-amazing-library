"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",z={key:0},h=e.defineComponent({__name:"IconFeature",props:{coordinates:null,selected:{type:Boolean},icon:null,id:null},setup(o){const t=o,l=e.ref(!1),r=e.inject("ol-format");new r.GeoJSON;const d=e.inject("ol-selectconditions").pointerMove,u=a=>{},n=a=>a.values_.id!=null,s=e.inject("selectedFeature");return e.watch([s],()=>{s&&s.value===t.id?l.value=!0:l.value=!1},{immediate:!0}),(a,w)=>{const i=e.resolveComponent("ol-overlay"),p=e.resolveComponent("ol-style-icon"),f=e.resolveComponent("ol-style"),m=e.resolveComponent("ol-interaction-select"),_=e.resolveComponent("ol-geom-point"),C=e.resolveComponent("ol-feature"),N=e.resolveComponent("ol-source-vector"),y=e.resolveComponent("ol-vector-layer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{position:o.coordinates},{default:e.withCtx(()=>[l.value?(e.openBlock(),e.createElementBlock("div",z,[e.renderSlot(a.$slots,"overlay")])):e.createCommentVNode("",!0)]),_:3},8,["position"]),e.createVNode(m,{onSelect:u,condition:e.unref(d),filter:n},{default:e.withCtx(()=>[e.createVNode(f,null,{default:e.withCtx(()=>[e.createVNode(p,{src:o.icon||e.unref(v)},null,8,["src"])]),_:1})]),_:1},8,["condition"]),e.createVNode(y,null,{default:e.withCtx(()=>[e.createVNode(N,null,{default:e.withCtx(()=>[e.createVNode(C,{properties:{id:o.id}},{default:e.withCtx(()=>[e.createVNode(_,{coordinates:o.coordinates},null,8,["coordinates"])]),_:1},8,["properties"])]),_:1}),e.createVNode(f,null,{default:e.withCtx(()=>[e.createVNode(p,{src:o.icon||e.unref(v),scale:.75},null,8,["src","scale"])]),_:1})]),_:1})],64)}}}),g=e.defineComponent({__name:"LineFeature",props:{from:null,to:null,color:null,width:null},setup(o){return(t,l)=>{const r=e.resolveComponent("ol-geom-line-string"),c=e.resolveComponent("ol-style-stroke"),d=e.resolveComponent("ol-style"),u=e.resolveComponent("ol-feature"),n=e.resolveComponent("ol-source-vector"),s=e.resolveComponent("ol-vector-layer");return e.openBlock(),e.createBlock(s,null,{default:e.withCtx(()=>[e.createVNode(n,null,{default:e.withCtx(()=>[e.createVNode(u,null,{default:e.withCtx(()=>[e.createVNode(r,{coordinates:[o.from,o.to]},null,8,["coordinates"]),e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(c,{color:o.color||"yellow",width:o.width||5},null,8,["color","width"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),A=e.defineComponent({__name:"Map",props:{clickAllowed:{type:Boolean,default:!0},center:{default:[40,40]},projection:{default:"EPSG:4326"},zoom:{default:8},rotation:{default:0},tileUrl:{default:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},setup(o){const t=o,l=e.useSlots(),r=e.ref(),c=e.ref(null),d=e.ref(!0);return e.provide("selectedFeature",e.computed(()=>c.value)),e.onMounted(()=>{if(t.clickAllowed!==!1&&l.default!==void 0){const u=l.default().filter(n=>n.type.__name==="IconFeature");r.value.map.on("click",n=>{if(!d.value)return;const s=n.map.getView().getZoom(),a=Math.pow(2,s),i=u.sort((p,f)=>{const m=p.props.coordinates,_=f.props.coordinates,C=m[0],N=m[1],y=_[0],x=_[1],M=Math.sqrt(Math.pow(C-n.coordinate[0],2)+Math.pow(N-n.coordinate[1],2)),V=Math.sqrt(Math.pow(y-n.coordinate[0],2)+Math.pow(x-n.coordinate[1],2));return M-V})[0];i!==void 0&&(Math.sqrt(Math.pow(i.props.coordinates[0]-n.coordinate[0],2)+Math.pow(i.props.coordinates[1]-n.coordinate[1],2))<40/a?c.value=i.props.id:c.value=null)})}}),(u,n)=>{const s=e.resolveComponent("ol-view"),a=e.resolveComponent("ol-source-osm"),w=e.resolveComponent("ol-tile-layer"),i=e.resolveComponent("ol-map");return e.openBlock(),e.createBlock(i,{loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"400px",width:"1000px"},ref_key:"olmap",ref:r},{default:e.withCtx(()=>[e.createVNode(s,{ref:"view",center:t.center,rotation:t.rotation,zoom:t.zoom,projection:t.projection},null,8,["center","rotation","zoom","projection"]),e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(a,{url:t.tileUrl},null,8,["url"])]),_:1}),e.renderSlot(u.$slots,"default",{test:1})]),_:3},512)}}}),F=e.createElementVNode("div",null,"F1",-1),b=e.createElementVNode("div",null,"F2",-1),k=e.defineComponent({__name:"HelloWorld",setup(o){return(t,l)=>(e.openBlock(),e.createBlock(A,{center:[40,40],rotation:0,zoom:8,projection:"EPSG:4326"},{default:e.withCtx(()=>[e.createVNode(h,{icon:e.unref(v),coordinates:[40,40],id:"f1"},{overlay:e.withCtx(()=>[F]),_:1},8,["icon"]),e.createVNode(h,{icon:e.unref(v),coordinates:[41,41],id:"f2"},{overlay:e.withCtx(()=>[b]),_:1},8,["icon"]),e.createVNode(g,{from:[40,40],to:[41,41]})]),_:1}))}}),E=e.defineComponent({__name:"MyButton",props:{primary:{type:Boolean,default:!1}},setup(o){const t=o,{primary:l}=e.reactive(t);return(r,c)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["btn",{primary:e.unref(l)}])},[e.renderSlot(r.$slots,"default",{},void 0,!0)],2))}});const H=(o,t)=>{const l=o.__vccOpts||o;for(const[r,c]of t)l[r]=c;return l},B=H(E,[["__scopeId","data-v-24f788ad"]]),D={install:o=>{o.component("HelloWorld",k),o.component("MyButton",B),o.component("wfc-icon",h),o.component("wfc-line",g),o.component("wfc-map",A)}};exports.HelloWorld=k;exports.IconFeature=h;exports.LineFeature=g;exports.Map=A;exports.MyButton=B;exports.default=D;
